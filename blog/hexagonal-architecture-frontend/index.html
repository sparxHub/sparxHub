<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Astro Blog" href="https://blog.nadav-daniel.com/rss.xml"><meta name="generator" content="Astro v5.4.0"><!-- Font preloads --><link rel="preload" href="/blog/fonts/Poppins-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous"><link rel="preload" href="/blog/fonts/Calibre-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="/blog/fonts/SFMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"><!-- Canonical URL --><link rel="canonical" href="https://blog.nadav-daniel.com/blog/hexagonal-architecture-frontend/"><!-- Primary Meta Tags --><title>Hexagonal Architecture: A Backend Approach for Scalable Systems</title><meta name="title" content="Hexagonal Architecture: A Backend Approach for Scalable Systems"><meta name="description" content="How Hexagonal Architecture enables backend decoupling, flexibility, and maintainability‚Äîwith a payment system as an example."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog.nadav-daniel.com/blog/hexagonal-architecture-frontend/"><meta property="og:title" content="Hexagonal Architecture: A Backend Approach for Scalable Systems"><meta property="og:description" content="How Hexagonal Architecture enables backend decoupling, flexibility, and maintainability‚Äîwith a payment system as an example."><meta property="og:image" content="https://blog.nadav-daniel.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog.nadav-daniel.com/blog/hexagonal-architecture-frontend/"><meta property="twitter:title" content="Hexagonal Architecture: A Backend Approach for Scalable Systems"><meta property="twitter:description" content="How Hexagonal Architecture enables backend decoupling, flexibility, and maintainability‚Äîwith a payment system as an example."><meta property="twitter:image" content="https://blog.nadav-daniel.com/blog-placeholder-1.jpg"><link rel="stylesheet" href="/blog/_astro/_slug_.DWa5epn8.css">
<style>.info-line[data-astro-cid-fkfdijxd]{display:flex;flex-wrap:wrap;align-items:center;gap:10px;font-size:.875em;margin-bottom:20px}.info-line[data-astro-cid-fkfdijxd] .date[data-astro-cid-fkfdijxd],.info-line[data-astro-cid-fkfdijxd] .read-time[data-astro-cid-fkfdijxd]{display:flex;align-items:center;gap:5px}.info-line[data-astro-cid-fkfdijxd] .tags[data-astro-cid-fkfdijxd]{list-style:none;display:flex;gap:5px;flex-wrap:wrap;padding:0}.info-line[data-astro-cid-fkfdijxd] .tags[data-astro-cid-fkfdijxd] li[data-astro-cid-fkfdijxd]{background-color:var(--background-end);border-radius:5px 15px;padding:2px 8px;white-space:nowrap}.info-line[data-astro-cid-fkfdijxd] .icon[data-astro-cid-fkfdijxd]{width:16px;height:16px}@media (max-width: 480px){.info-line[data-astro-cid-fkfdijxd]{justify-content:space-between}.info-line[data-astro-cid-fkfdijxd] .date[data-astro-cid-fkfdijxd],.info-line[data-astro-cid-fkfdijxd] .read-time[data-astro-cid-fkfdijxd]{flex-basis:100%;justify-content:center}.info-line[data-astro-cid-fkfdijxd] .tags[data-astro-cid-fkfdijxd]{justify-content:center;margin-top:10px}}main[data-astro-cid-bvzihdzo]{max-width:960px;width:100%;margin:0 auto;padding:20px;box-sizing:border-box;background-color:var(--background-start)}.back-button[data-astro-cid-bvzihdzo]{display:inline-flex;align-items:center;gap:8px;margin-top:10px;padding:10px 18px;font-size:16px;font-weight:600;color:var(--text-primary);background-color:var(--accent);border-radius:6px;text-decoration:none;transition:all .3s ease-in-out;box-shadow:var(--box-shadow)}.back-button[data-astro-cid-bvzihdzo]:hover{background-color:var(--accent-dark);color:#fff}.arrow[data-astro-cid-bvzihdzo]{font-size:18px;font-weight:700}.page-header[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{font-size:2.5rem;color:var(--text-primary);margin-bottom:.5em}.page-header[data-astro-cid-bvzihdzo] p[data-astro-cid-bvzihdzo]{color:var(--text-secondary);font-size:1.2rem;max-width:700px}.hero-image[data-astro-cid-bvzihdzo]{margin:20px 0}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{width:100%;height:auto;aspect-ratio:2 / 1;object-fit:cover;border-radius:10px;box-shadow:var(--box-shadow)}.description[data-astro-cid-bvzihdzo]{font-size:1.8em;max-width:100%;margin-top:1em;margin-bottom:1.5em;line-height:1.5}.content[data-astro-cid-bvzihdzo]{color:var(--text-primary);font-size:1.125rem;line-height:1.8;padding-bottom:3em}@media (max-width: 768px){main[data-astro-cid-bvzihdzo]{padding:16px}.back-button[data-astro-cid-bvzihdzo]{font-size:.9rem;padding:8px 12px;margin-left:0}.page-header[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{font-size:1.8rem}.description[data-astro-cid-bvzihdzo]{font-size:1.5em;margin-top:.75em;margin-bottom:1.25em}.content[data-astro-cid-bvzihdzo]{font-size:1rem}}
</style><style>blockquote[data-astro-cid-lqb4hujt]{margin:0 0 1.1em;box-shadow:var(--accent-dark) -7px 0 0 0;background-color:var(--gray-light);border-radius:5px;padding:15px 20px;color:var(--primary-color);font-weight:700}blockquote[data-astro-cid-lqb4hujt],q[data-astro-cid-lqb4hujt]{quotes:none}
</style></head> <body data-astro-cid-bvzihdzo> <main data-astro-cid-bvzihdzo> <!-- Back to Blog Hub Button --> <a href="/blog/" class="back-button" data-astro-cid-bvzihdzo> <span class="arrow" data-astro-cid-bvzihdzo>‚Üê</span> Back
</a> <article data-astro-cid-bvzihdzo> <div class="info-line" data-astro-cid-fkfdijxd> <span class="date" data-astro-cid-fkfdijxd> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1q9neI" prefix="r0" component-url="/blog/_astro/IconWrapper.CblZfQRY.js" component-export="CalendarIcon" renderer-url="/blog/_astro/client.CxazpblK.js" props="{&quot;data-astro-cid-fkfdijxd&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;CalendarIcon&quot;,&quot;value&quot;:true}" await-children><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"></path></svg><!--astro:end--></astro-island> <time datetime="2024-03-01T22:00:00.000Z"> Mar 2, 2024 </time> </span> <ul class="tags" data-astro-cid-fkfdijxd> <li data-astro-cid-fkfdijxd>hexagonal architecture</li><li data-astro-cid-fkfdijxd>Node.js</li><li data-astro-cid-fkfdijxd>TypeScript</li><li data-astro-cid-fkfdijxd>backend</li><li data-astro-cid-fkfdijxd>design patterns</li> </ul> <span class="read-time" data-astro-cid-fkfdijxd> <astro-island uid="Z2flMxc" prefix="r1" component-url="/blog/_astro/IconWrapper.CblZfQRY.js" component-export="ClockIcon" renderer-url="/blog/_astro/client.CxazpblK.js" props="{&quot;data-astro-cid-fkfdijxd&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;ClockIcon&quot;,&quot;value&quot;:true}" await-children><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"></path></svg><!--astro:end--></astro-island> 12 minutes </span> </div>  <h1 class="description" data-astro-cid-bvzihdzo>How Hexagonal Architecture enables backend decoupling, flexibility, and maintainability‚Äîwith a payment system as an example.</h1> <!-- Hero Image --> <div class="hero-image" data-astro-cid-bvzihdzo> <img src="/blog/images/hive_hero.jpg" alt="" width="1200" height="600" class="responsive-hero" data-astro-cid-bvzihdzo> </div> <!-- Content --> <div class="content" data-astro-cid-bvzihdzo>  <p>Modern backend systems need to be <strong>scalable, maintainable, and adaptable</strong>. Whether handling <strong>payments, user authentication, or database access</strong>, a well-structured architecture <strong>separates business logic from infrastructure</strong>, making the system <strong>flexible</strong> and <strong>easy to evolve</strong>.</p>
<p>One of the best approaches to achieve this is <strong>Hexagonal Architecture</strong>, also known as <strong>Ports and Adapters</strong>.</p>
<blockquote data-astro-cid-lqb4hujt> <p>Hexagonal Architecture ensures that your core business logic is independent of databases, APIs, or
external services, making your system future-proof.</p> </blockquote> 
<hr/>
<h2 id="-the-problem-rigid-and-fragile-backend-systems">üöÄ The Problem: Rigid and Fragile Backend Systems</h2>
<p>Imagine a backend system that processes <strong>payments</strong>. Initially, it only supports <strong>Stripe</strong>. Over time, new requirements emerge:</p>
<ul>
<li>A client requests <strong>PayPal</strong> integration.</li>
<li>A different region requires <strong>local bank payments</strong>.</li>
<li>Future expansion demands <strong>Apple Pay or cryptocurrency</strong> support.</li>
</ul>
<p>If the system is <strong>tightly coupled</strong> to Stripe, these changes require <strong>major refactoring</strong>, increasing costs and complexity.</p>
<p>This problem isn‚Äôt limited to payments‚Äîit happens with <strong>databases</strong>, <strong>messaging systems</strong>, and <strong>third-party APIs</strong>.</p>
<hr/>
<h2 id="Ô∏è-what-is-hexagonal-architecture">üõ†Ô∏è What is Hexagonal Architecture?</h2>
<p>Hexagonal Architecture <strong>decouples business logic</strong> from external dependencies using <strong>Ports and Adapters</strong>.</p>
<h3 id="Ô∏è-the-key-components">üèóÔ∏è The Key Components:</h3>
<p>1Ô∏è‚É£ <strong>Core Domain (Business Logic)</strong> ‚Äì The heart of the application.<br/>
2Ô∏è‚É£ <strong>Ports (Interfaces)</strong> ‚Äì Define how external services interact with the core.<br/>
3Ô∏è‚É£ <strong>Adapters (Implementations)</strong> ‚Äì Handle actual integration with external services.</p>
<p>Think of <strong>a power outlet</strong> (port) that accepts <strong>different chargers</strong> (adapters) without changing the electrical system (core).</p>
<hr/>
<h2 id="-applying-hexagonal-architecture-using-payments-as-an-example">üéØ Applying Hexagonal Architecture (Using Payments as an Example)</h2>
<p>Let‚Äôs see how Hexagonal Architecture applies in a <strong>backend system</strong> with <strong>payments as an example</strong>.</p>
<h3 id="1Ô∏è‚É£-business-logic-stays-independent">1Ô∏è‚É£ Business Logic Stays Independent</h3>
<p>The <strong>core domain</strong> doesn‚Äôt care <strong>how</strong> a payment is processed. It only defines <strong>what</strong> a payment provider must do.</p>
<div class="expressive-code"><link rel="stylesheet" href="/blog/_astro/ec.p5m8n.css"/><script type="module" src="/blog/_astro/ec.8zarh.js"></script><figure class="frame has-title"><figcaption class="header"><span class="title">ports/PaymentProvider.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">export</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">interface</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#FFCB6B">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#50FA7B;--1:#82AAFF">charge</span><span style="--0:#F8F8F2;--1:#89DDFF">(</span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">amount</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">number</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">currency</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">)</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#FFCB6B">Promise</span><span style="--0:#F8F8F2;--1:#89DDFF">&lt;</span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">&gt;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="export interface PaymentProvider {  charge(amount: number, currency: string): Promise<string>}"><div></div></button></div></figure></div>
<p>This is a <strong>Port</strong>‚Äîit defines a contract for any <strong>payment provider</strong>.</p>
<hr/>
<h3 id="2Ô∏è‚É£-external-services-are-plugged-in-using-adapters">2Ô∏è‚É£ External Services are Plugged in Using Adapters</h3>
<p>Each <strong>adapter</strong> implements the <code>PaymentProvider</code> interface.</p>
<h4 id="-stripe-adapter">‚úÖ Stripe Adapter:</h4>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">adapters/StripeAdapter.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../ports/PaymentProvider</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">export</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">class</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--1:#FFCB6B">StripeAdapter</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">implements</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#C3E88D">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FF79C6;--1:#C792EA">async</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">charge</span><span style="--0:#F8F8F2;--1:#89DDFF">(</span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">amount</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">number</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">currency</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">)</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#FFCB6B">Promise</span><span style="--0:#F8F8F2;--1:#89DDFF">&lt;</span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">&gt;</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#89DDFF">return</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F1FA8C;--1:#89DDFF">`</span><span style="--0:#F1FA8C;--1:#C3E88D">Charged $</span><span style="--0:#FF79C6;--1:#89DDFF">${</span><span style="--0:#F8F8F2;--1:#F07178">amount</span><span style="--0:#FF79C6;--1:#89DDFF">}</span><span style="--0:#F1FA8C;--1:#C3E88D"> </span><span style="--0:#FF79C6;--1:#89DDFF">${</span><span style="--0:#F8F8F2;--1:#F07178">currency</span><span style="--0:#FF79C6;--1:#89DDFF">}</span><span style="--0:#F1FA8C;--1:#C3E88D"> via Stripe</span><span style="--0:#F1FA8C;--1:#89DDFF">`</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2">  </span></span><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { PaymentProvider } from '../ports/PaymentProvider'export class StripeAdapter implements PaymentProvider {  async charge(amount: number, currency: string): Promise<string> {    return `Charged $${amount} ${currency} via Stripe`  }}"><div></div></button></div></figure></div>
<h4 id="-paypal-adapter">‚úÖ PayPal Adapter:</h4>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">adapters/PayPalAdapter.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../ports/PaymentProvider</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">export</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">class</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--1:#FFCB6B">PayPalAdapter</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">implements</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#C3E88D">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FF79C6;--1:#C792EA">async</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">charge</span><span style="--0:#F8F8F2;--1:#89DDFF">(</span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">amount</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">number</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">currency</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">)</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#FFCB6B">Promise</span><span style="--0:#F8F8F2;--1:#89DDFF">&lt;</span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">&gt;</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#89DDFF">return</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F1FA8C;--1:#89DDFF">`</span><span style="--0:#F1FA8C;--1:#C3E88D">Charged $</span><span style="--0:#FF79C6;--1:#89DDFF">${</span><span style="--0:#F8F8F2;--1:#F07178">amount</span><span style="--0:#FF79C6;--1:#89DDFF">}</span><span style="--0:#F1FA8C;--1:#C3E88D"> </span><span style="--0:#FF79C6;--1:#89DDFF">${</span><span style="--0:#F8F8F2;--1:#F07178">currency</span><span style="--0:#FF79C6;--1:#89DDFF">}</span><span style="--0:#F1FA8C;--1:#C3E88D"> via PayPal</span><span style="--0:#F1FA8C;--1:#89DDFF">`</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2">  </span></span><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { PaymentProvider } from '../ports/PaymentProvider'export class PayPalAdapter implements PaymentProvider {  async charge(amount: number, currency: string): Promise<string> {    return `Charged $${amount} ${currency} via PayPal`  }}"><div></div></button></div></figure></div>
<p>These <strong>Adapters</strong> handle communication with external services, keeping <strong>the core system untouched</strong>.</p>
<hr/>
<h3 id="3Ô∏è‚É£-the-service-layer-bridges-everything">3Ô∏è‚É£ The Service Layer Bridges Everything</h3>
<p>The <strong>business logic</strong> only interacts with the <code>PaymentProvider</code> interface.</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">services/PaymentService.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../ports/PaymentProvider</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">export</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">class</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--1:#FFCB6B">PaymentService</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FF79C6;--1:#C792EA">constructor</span><span style="--0:#F8F8F2;--1:#89DDFF">(</span><span style="--0:#FF79C6;--1:#C792EA">private</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">provider</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#FFCB6B">PaymentProvider</span><span style="--0:#F8F8F2;--1:#89DDFF">)</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FF79C6;--1:#C792EA">async</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">processPayment</span><span style="--0:#F8F8F2;--1:#89DDFF">(</span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">amount</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">number</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">currency</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">)</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#89DDFF">return</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#BD93F9;--0fs:italic;--1:#FF5370;--1fs:italic">this</span><span style="--0:#F8F8F2;--1:#89DDFF">.</span><span style="--0:#F8F8F2;--1:#F07178">provider</span><span style="--0:#F8F8F2;--1:#89DDFF">.</span><span style="--0:#50FA7B;--1:#82AAFF">charge</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#F8F8F2;--1:#F07178">amount</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">currency</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2">  </span></span><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { PaymentProvider } from '../ports/PaymentProvider'export class PaymentService {  constructor(private provider: PaymentProvider) {}  async processPayment(amount: number, currency: string) {    return this.provider.charge(amount, currency)  }}"><div></div></button></div></figure></div>
<p><strong>Notice:</strong> The <code>PaymentService</code> doesn‚Äôt care which provider is used‚Äîit just calls <code>charge()</code>.</p>
<blockquote data-astro-cid-lqb4hujt> <p>This is the core idea of Hexagonal Architecture: The business logic stays <strong>clean</strong>, while
external dependencies are handled separately.</p> </blockquote> 
<hr/>
<h3 id="4Ô∏è‚É£-the-api-simply-selects-the-payment-provider">4Ô∏è‚É£ The API Simply Selects the Payment Provider</h3>
<p>The <strong>API layer</strong> picks the correct <strong>adapter</strong> dynamically.</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">controllers/PaymentController.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">Request</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">Response</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">express</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">PaymentService</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../services/PaymentService</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">StripeAdapter</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../adapters/StripeAdapter</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">PayPalAdapter</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../adapters/PayPalAdapter</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">export</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">class</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--1:#FFCB6B">PaymentController</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FF79C6;--1:#C792EA">static</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">async</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">pay</span><span style="--0:#F8F8F2;--1:#89DDFF">(</span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">req</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#FFCB6B">Request</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">res</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#FFCB6B">Response</span><span style="--0:#F8F8F2;--1:#89DDFF">)</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#C792EA">const</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">amount</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">currency</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">provider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">req</span><span style="--0:#F8F8F2;--1:#89DDFF">.</span><span style="--0:#F8F8F2;--1:#F07178">body</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#C792EA">const</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">paymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">provider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">===</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">paypal</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">?</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#C792EA">new</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">PayPalAdapter</span><span style="--0:#F8F8F2;--1:#BBBBBB">() </span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#C792EA">new</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">StripeAdapter</span><span style="--0:#F8F8F2;--1:#BBBBBB">()</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#C792EA">const</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">paymentService</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#C792EA">new</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">PaymentService</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#F8F8F2;--1:#F07178">paymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#C792EA">const</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">result</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">await</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">paymentService</span><span style="--0:#F8F8F2;--1:#89DDFF">.</span><span style="--0:#50FA7B;--1:#82AAFF">processPayment</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#F8F8F2;--1:#F07178">amount</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">currency</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2">    </span></span><span style="--0:#F8F8F2;--1:#F07178">res</span><span style="--0:#F8F8F2;--1:#89DDFF">.</span><span style="--0:#50FA7B;--1:#82AAFF">json</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> message</span><span style="--0:#FF79C6;--1:#89DDFF">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">result</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2">  </span></span><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { Request, Response } from 'express'import { PaymentService } from '../services/PaymentService'import { StripeAdapter } from '../adapters/StripeAdapter'import { PayPalAdapter } from '../adapters/PayPalAdapter'export class PaymentController {  static async pay(req: Request, res: Response) {    const { amount, currency, provider } = req.body    const paymentProvider = provider === 'paypal' ? new PayPalAdapter() : new StripeAdapter()    const paymentService = new PaymentService(paymentProvider)    const result = await paymentService.processPayment(amount, currency)    res.json({ message: result })  }}"><div></div></button></div></figure></div>
<p>This means <strong>new payment providers</strong> can be added <strong>without touching the business logic</strong>.</p>
<hr/>
<h2 id="-beyond-payments-other-use-cases">üîÑ Beyond Payments: Other Use Cases</h2>
<p>Hexagonal Architecture is <strong>not just for payments</strong>‚Äîit applies to <strong>any backend system</strong> that interacts with external dependencies.</p>
<h3 id="-database-access">üîπ Database Access</h3>
<ul>
<li>Instead of hardcoding <strong>MongoDB</strong>, use a <strong>Repository Pattern</strong> to switch to <strong>PostgreSQL</strong> or <strong>DynamoDB</strong> easily.</li>
</ul>
<h3 id="-messaging--event-streaming">üîπ Messaging &amp; Event Streaming</h3>
<ul>
<li>Define a <strong>MessageQueuePort</strong> so you can swap <strong>Kafka, RabbitMQ, or AWS SQS</strong> seamlessly.</li>
</ul>
<h3 id="-authentication">üîπ Authentication</h3>
<ul>
<li>Implement an <strong>AuthProviderPort</strong> to support <strong>JWT, OAuth, Firebase, or custom authentication</strong> without modifying business logic.</li>
</ul>
<blockquote data-astro-cid-lqb4hujt> <p>Hexagonal Architecture applies to <strong>any system that interacts with external services</strong>, making
backend applications flexible and future-proof.</p> </blockquote> 
<hr/>
<h2 id="-testing-with-mock-adapters">üß™ Testing with Mock Adapters</h2>
<p>Hexagonal Architecture also makes <strong>unit testing</strong> easier. Instead of calling <strong>real payment APIs</strong>, we inject <strong>mock adapters</strong>.</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">tests/PaymentService.test.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">PaymentService</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../services/PaymentService</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#89DDFF">import</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">from</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">../ports/PaymentProvider</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#C792EA">class</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--1:#FFCB6B">MockPaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">implements</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#C3E88D">PaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FF79C6;--1:#C792EA">async</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">charge</span><span style="--0:#F8F8F2;--1:#89DDFF">(</span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">amount</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">number</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#F78C6C">currency</span><span style="--0:#FF79C6;--1:#C792EA">:</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#B2CCD6">string</span><span style="--0:#F8F8F2;--1:#89DDFF">)</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#89DDFF">return</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F1FA8C;--1:#89DDFF">`</span><span style="--0:#F1FA8C;--1:#C3E88D">Test payment of $</span><span style="--0:#FF79C6;--1:#89DDFF">${</span><span style="--0:#F8F8F2;--1:#F07178">amount</span><span style="--0:#FF79C6;--1:#89DDFF">}</span><span style="--0:#F1FA8C;--1:#C3E88D"> </span><span style="--0:#FF79C6;--1:#89DDFF">${</span><span style="--0:#F8F8F2;--1:#F07178">currency</span><span style="--1:#89DDFF"><span style="--0:#FF79C6">}</span><span style="--0:#F1FA8C">`</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2">  </span></span><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#89DDFF">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#50FA7B;--1:#82AAFF">describe</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">PaymentService</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">()</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=&gt;</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#50FA7B;--1:#82AAFF">it</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">should process payments using a mock provider</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">async</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">()</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=&gt;</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#C792EA">const</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">service</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#C792EA">new</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">PaymentService</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#FF79C6;--0fw:bold;--1:#C792EA">new</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#50FA7B;--1:#82AAFF">MockPaymentProvider</span><span style="--0:#F8F8F2;--1:#BBBBBB">())</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#C792EA">const</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">result</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#C792EA">=</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#FF79C6;--1:#89DDFF">await</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#F8F8F2;--1:#F07178">service</span><span style="--0:#F8F8F2;--1:#89DDFF">.</span><span style="--0:#50FA7B;--1:#82AAFF">processPayment</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#BD93F9;--1:#F78C6C">50</span><span style="--0:#F8F8F2;--1:#89DDFF">,</span><span style="--0:#F8F8F2;--1:#BBBBBB"> </span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">USD</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#50FA7B;--1:#82AAFF">expect</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#F8F8F2;--1:#F07178">result</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span><span style="--0:#F8F8F2;--1:#89DDFF">.</span><span style="--0:#50FA7B;--1:#82AAFF">toBe</span><span style="--0:#F8F8F2;--1:#BBBBBB">(</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F1FA8C;--1:#C3E88D">Test payment of $50 USD</span><span style="--0:#E9F284;--1:#89DDFF">&#39;</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2">  </span></span><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#89DDFF">}</span><span style="--0:#F8F8F2;--1:#BBBBBB">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { PaymentService } from '../services/PaymentService'import { PaymentProvider } from '../ports/PaymentProvider'class MockPaymentProvider implements PaymentProvider {  async charge(amount: number, currency: string) {    return `Test payment of $${amount} ${currency}`  }}describe('PaymentService', () => {  it('should process payments using a mock provider', async () => {    const service = new PaymentService(new MockPaymentProvider())    const result = await service.processPayment(50, 'USD')    expect(result).toBe('Test payment of $50 USD')  })})"><div></div></button></div></figure></div>
<p><strong>Benefit?</strong><br/>
‚úÖ No real API calls during tests.<br/>
‚úÖ Faster, more reliable unit testing.<br/>
‚úÖ Ensures business logic is tested <strong>independently</strong> of external services.</p>
<hr/>
<h2 id="-the-benefits-of-hexagonal-architecture">üöÄ The Benefits of Hexagonal Architecture</h2>
<p>By structuring our <strong>backend system</strong> with Hexagonal Architecture, we gain:</p>
<p>‚úÖ <strong>Scalability</strong> ‚Äì Easily switch databases, APIs, or third-party services.<br/>
‚úÖ <strong>Maintainability</strong> ‚Äì Business logic stays <strong>clean and testable</strong>.<br/>
‚úÖ <strong>Vendor Independence</strong> ‚Äì Swap Stripe for PayPal without major changes.<br/>
‚úÖ <strong>Better Testing</strong> ‚Äì Use <strong>mock adapters</strong> for unit tests.</p>
<blockquote data-astro-cid-lqb4hujt> <p>Whether it‚Äôs a <strong>payment system, database, or event-driven architecture</strong>, Hexagonal Architecture
makes backends <strong>future-proof</strong>.</p> </blockquote> 
<hr/>
<h2 id="-conclusion">üî• Conclusion</h2>
<p>Hexagonal Architecture is a <strong>powerful pattern</strong> that keeps backend systems <strong>flexible, maintainable, and testable</strong>.</p>
<p>We demonstrated this <strong>using payments as an example</strong>, but the same principles <strong>apply to databases, messaging queues, authentication, and any external service</strong>.</p>
<p>Next time you build a backend system, <strong>consider Hexagonal Architecture</strong>‚Äîyour future self will thank you! üöÄ</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/k_GkYMd8Ouc?si=oX9lGM12M2P3JKIR" title="YouTube video: Monolithic MVP Architecture" frameborder="0" allowfullscreen></iframe>
<hr/>
<p>Would you apply Hexagonal Architecture to your next backend project? Share your thoughts in the comments! üéØ</p>  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 Nadav Daniel. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <!-- GitHub --> <a href="https://github.com/sparxHub" target="_blank" aria-label="GitHub Profile" data-astro-cid-sz7xmlte> <svg viewBox="0 0 16 16" width="32" height="32" aria-hidden="true" data-astro-cid-sz7xmlte> <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path> </svg> </a> <!-- Email --> <a href="mailto:nadavdaniel@hotmail.com" target="_blank" aria-label="Email Me" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true" data-astro-cid-sz7xmlte> <path fill="currentColor" d="M12 13.275l-10-6.5V18h20V6.775l-10 6.5zM2 5l10 6.5L22 5H2z" data-astro-cid-sz7xmlte></path> </svg> </a> </div> </footer>  </body></html>